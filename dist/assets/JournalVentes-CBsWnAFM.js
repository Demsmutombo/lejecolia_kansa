import{a as I,w as he,c as z,q as $e,R as Ve,l as x,o as y,h as e,m as q,p as T,g as D,t as u,B as ie,n as j,C as U,v as W,x as Z,F as le,G as ne,D as De,E as Ne,S as Ee,u as Re}from"./vendor-Bjq3GXyS.js";import{_ as Pe,c as qe,u as Oe,f as N,a as ce,e as ze,d as w}from"./index-CwjmzDsC.js";import{A as _e}from"./ArgonSelect-Do4WPwre.js";import{C as je}from"./charts-D32nV7-X.js";import"./bootstrap-DXdCWnwj.js";const a=L=>(De("data-v-1039baee"),L=L(),Ne(),L),Le={class:"container-fluid px-4 py-3"},Be={class:"row mb-4"},Me={class:"col-12"},Ge={class:"d-flex justify-content-between align-items-center"},Je=a(()=>e("div",null,[e("h4",{class:"mb-0"},[e("i",{class:"fas fa-book me-2 text-primary"}),U(" Journal des Ventes ")]),e("p",{class:"text-sm text-white mb-0"}," Analyse complÃ¨te des ventes avec statistiques et rapports financiers ")],-1)),Qe={class:"row mb-4"},He={class:"col-lg-3 col-md-6 mb-3"},We={class:"card h-100"},Ze={class:"card-body p-3"},Ke={class:"d-flex"},Xe=a(()=>e("div",{class:"icon icon-shape bg-gradient-primary shadow text-center border-radius-md me-3"},[e("i",{class:"fas fa-coins text-white text-lg opacity-10"})],-1)),Ye={class:"flex-grow-1"},et=a(()=>e("p",{class:"text-sm mb-0 text-capitalize font-weight-bold"},"CA Total",-1)),tt={class:"font-weight-bolder mb-0"},st={class:"text-xs text-secondary"},ot={class:"col-lg-3 col-md-6 mb-3"},at={class:"card h-100"},it={class:"card-body p-3"},lt={class:"d-flex"},nt=a(()=>e("div",{class:"icon icon-shape bg-gradient-success shadow text-center border-radius-md me-3"},[e("i",{class:"fas fa-chart-line text-white text-lg opacity-10"})],-1)),ct={class:"flex-grow-1"},rt=a(()=>e("p",{class:"text-sm mb-0 text-capitalize font-weight-bold"},"BÃ©nÃ©fice Net",-1)),dt={class:"font-weight-bolder mb-0"},ut={class:"text-xs text-secondary"},mt={class:"col-lg-3 col-md-6 mb-3"},ht={class:"card h-100"},_t={class:"card-body p-3"},pt={class:"d-flex"},gt=a(()=>e("div",{class:"icon icon-shape bg-gradient-info shadow text-center border-radius-md me-3"},[e("i",{class:"fas fa-calendar-day text-white text-lg opacity-10"})],-1)),vt={class:"flex-grow-1"},bt=a(()=>e("p",{class:"text-sm mb-0 text-capitalize font-weight-bold"},"CA Aujourd'hui",-1)),ft={class:"font-weight-bolder mb-0"},xt={class:"text-xs text-secondary"},yt={class:"col-lg-3 col-md-6 mb-3"},St={class:"card h-100"},wt={class:"card-body p-3"},At={class:"d-flex"},It=a(()=>e("div",{class:"icon icon-shape bg-gradient-warning shadow text-center border-radius-md me-3"},[e("i",{class:"fas fa-boxes text-white text-lg opacity-10"})],-1)),Ut={class:"flex-grow-1"},Ct=a(()=>e("p",{class:"text-sm mb-0 text-capitalize font-weight-bold"},"QuantitÃ© Vendue",-1)),Ft={class:"font-weight-bolder mb-0"},Tt=a(()=>e("span",{class:"text-xs text-secondary"}," Articles vendus ",-1)),kt={class:"card mb-4"},$t={class:"card-header pb-0"},Vt={class:"d-flex justify-content-between align-items-center"},Dt=a(()=>e("h6",{class:"mb-0"},"ðŸ” Filtres",-1)),Nt=a(()=>e("i",{class:"fas fa-redo me-1"},null,-1)),Et={class:"card-body"},Rt={class:"row"},Pt={class:"col-md-3 mb-3"},qt=a(()=>e("label",{class:"form-label"},"Recherche",-1)),Ot={class:"col-md-3 mb-3"},zt=a(()=>e("label",{class:"form-label"},"Date DÃ©but",-1)),jt={class:"col-md-3 mb-3"},Lt=a(()=>e("label",{class:"form-label"},"Date Fin",-1)),Bt={key:0,class:"col-md-3 mb-3"},Mt=a(()=>e("label",{class:"form-label"},"Site",-1)),Gt={class:"col-md-3 mb-3"},Jt=a(()=>e("label",{class:"form-label"},"Utilisateur",-1)),Qt={class:"row"},Ht={class:"col-12"},Wt=a(()=>e("i",{class:"fas fa-search me-1"},null,-1)),Zt={class:"card"},Kt={class:"card-header pb-0"},Xt={class:"nav nav-tabs",role:"tablist"},Yt={class:"nav-item"},es=a(()=>e("i",{class:"fas fa-list me-1"},null,-1)),ts={class:"nav-item"},ss=a(()=>e("i",{class:"fas fa-chart-bar me-1"},null,-1)),os={class:"nav-item"},as=a(()=>e("i",{class:"fas fa-user-circle me-1"},null,-1)),is={class:"nav-item"},ls=a(()=>e("i",{class:"fas fa-file-invoice-dollar me-1"},null,-1)),ns={class:"card-body"},cs={class:"d-flex justify-content-between align-items-center mb-3"},rs=a(()=>e("h6",{class:"mb-0"},"Liste des Ventes",-1)),ds=a(()=>e("i",{class:"fas fa-file-excel me-1"},null,-1)),us={class:"table-responsive"},ms={class:"table align-items-center mb-0"},hs=a(()=>e("thead",null,[e("tr",null,[e("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder"},"Date"),e("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder"},"Cmd"),e("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder"},"Article"),e("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder text-center"},"QtÃ©"),e("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder text-end"},"P.U."),e("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder text-end"},"Total"),e("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder"},"Vendeur"),e("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder"},"Site"),e("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder text-center"},"Actions")])],-1)),_s={key:0},ps=a(()=>e("td",{colspan:"9",class:"text-center py-4"},[e("div",{class:"spinner-border text-primary",role:"status"},[e("span",{class:"visually-hidden"},"Chargement...")])],-1)),gs=[ps],vs={key:1},bs=a(()=>e("td",{colspan:"9",class:"text-center text-secondary py-4"},[e("i",{class:"fas fa-inbox fa-2x mb-2"}),e("p",{class:"mb-0"},"Aucune vente disponible")],-1)),fs=[bs],xs={class:"text-xs mb-0"},ys={class:"badge badge-sm bg-gradient-secondary"},Ss={class:"text-sm font-weight-bold mb-0"},ws={class:"align-middle text-center"},As={class:"text-sm"},Is={class:"align-middle text-end"},Us={class:"text-xs text-secondary"},Cs={class:"align-middle text-end"},Fs={class:"text-sm font-weight-bold"},Ts={class:"text-xs font-weight-bold mb-0 text-info"},ks={class:"badge badge-sm bg-gradient-info"},$s={class:"align-middle text-center"},Vs={class:"d-flex justify-content-center gap-1"},Ds=["onClick"],Ns=a(()=>e("i",{class:"fas fa-eye text-sm"},null,-1)),Es=[Ns],Rs=["onClick"],Ps=a(()=>e("i",{class:"fas fa-external-link-alt text-sm"},null,-1)),qs=[Ps],Os={key:0,class:"mt-3"},zs={class:"text-sm text-secondary text-end mb-0"},js={class:"d-flex justify-content-between align-items-center mb-3"},Ls=a(()=>e("h6",{class:"mb-0"},"Ventes GroupÃ©es par Article",-1)),Bs=a(()=>e("i",{class:"fas fa-file-excel me-1"},null,-1)),Ms={class:"table-responsive"},Gs={class:"table align-items-center mb-0"},Js=a(()=>e("thead",null,[e("tr",null,[e("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder"},"Article"),e("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder text-center"},"QuantitÃ©"),e("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder text-end"},"Montant Total"),e("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder text-center"},"Nb Ventes")])],-1)),Qs={key:0},Hs=a(()=>e("td",{colspan:"4",class:"text-center text-secondary py-4"},[e("i",{class:"fas fa-inbox fa-2x mb-2"}),e("p",{class:"mb-0"},"Aucune donnÃ©e disponible")],-1)),Ws=[Hs],Zs={key:1},Ks=a(()=>e("td",{colspan:"4",class:"text-center py-4"},[e("div",{class:"spinner-border text-primary",role:"status"},[e("span",{class:"visually-hidden"},"Chargement...")])],-1)),Xs=[Ks],Ys={class:"text-sm font-weight-bold mb-0"},eo={class:"align-middle text-center"},to={class:"text-sm"},so={class:"align-middle text-end"},oo={class:"text-sm font-weight-bold"},ao={class:"align-middle text-center"},io={class:"badge badge-sm bg-gradient-info"},lo={class:"d-flex justify-content-between align-items-center mb-3"},no=a(()=>e("h6",{class:"mb-0"},"Ventes par Utilisateur",-1)),co=a(()=>e("i",{class:"fas fa-file-excel me-1"},null,-1)),ro={class:"table-responsive"},uo={class:"table align-items-center mb-0"},mo=a(()=>e("thead",null,[e("tr",null,[e("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder"},"Date"),e("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder"},"Vendeur"),e("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder"},"Article"),e("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder text-center"},"QtÃ©"),e("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder text-end"},"Total"),e("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder"},"Site")])],-1)),ho={key:0},_o=a(()=>e("td",{colspan:"6",class:"text-center py-4"},[e("div",{class:"spinner-border text-primary",role:"status"},[e("span",{class:"visually-hidden"},"Chargement...")])],-1)),po=[_o],go={key:1},vo=a(()=>e("td",{colspan:"6",class:"text-center text-secondary py-4"},[e("i",{class:"fas fa-inbox fa-2x mb-2"}),e("p",{class:"mb-0"},"Aucune donnÃ©e disponible")],-1)),bo=[vo],fo={class:"text-xs mb-0"},xo={class:"text-xs font-weight-bold mb-0 text-primary"},yo={class:"text-sm font-weight-bold mb-0"},So={class:"align-middle text-center"},wo={class:"text-sm"},Ao={class:"align-middle text-end"},Io={class:"text-sm font-weight-bold"},Uo={class:"badge badge-sm bg-gradient-info"},Co={key:0,class:"mt-3"},Fo={class:"text-sm text-secondary text-end mb-0"},To={class:"row"},ko={class:"col-12 mb-4"},$o=a(()=>e("h6",{class:"mb-3"},"ðŸ“Š RÃ©sumÃ© Financier",-1)),Vo={class:"row"},Do={class:"col-md-4 mb-3"},No={class:"card bg-gradient-primary"},Eo={class:"card-body p-3 text-white"},Ro=a(()=>e("p",{class:"text-sm mb-1 opacity-8"},"CA Total",-1)),Po={class:"font-weight-bolder mb-0 text-white"},qo={class:"col-md-4 mb-3"},Oo={class:"card bg-gradient-success"},zo={class:"card-body p-3 text-white"},jo=a(()=>e("p",{class:"text-sm mb-1 opacity-8"},"Marge Brute",-1)),Lo={class:"font-weight-bolder mb-0 text-white"},Bo={class:"col-md-4 mb-3"},Mo={class:"card bg-gradient-info"},Go={class:"card-body p-3 text-white"},Jo=a(()=>e("p",{class:"text-sm mb-1 opacity-8"},"BÃ©nÃ©fice Net",-1)),Qo={class:"font-weight-bolder mb-0 text-white"},Ho={class:"col-12"},Wo=a(()=>e("h6",{class:"mb-3"},"ðŸ“ˆ Ã‰volution des Ventes",-1)),Zo={class:"card"},Ko={class:"card-body"},Xo={key:0,class:"text-center text-secondary py-4"},Yo=a(()=>e("i",{class:"fas fa-chart-line fa-2x mb-2 opacity-6"},null,-1)),ea=a(()=>e("p",{class:"mb-0"},"Aucune donnÃ©e d'Ã©volution disponible",-1)),ta=a(()=>e("p",{class:"text-xs mb-0"},"Essayez de sÃ©lectionner une pÃ©riode avec des ventes",-1)),sa=[Yo,ea,ta],oa={key:1,id:"evolutionChart",height:"100"},aa={key:0,class:"modal fade show d-block",tabindex:"-1",style:{"background-color":"rgba(0,0,0,0.5)"}},ia={class:"modal-dialog modal-dialog-centered"},la={class:"modal-content"},na={class:"modal-header bg-gradient-info"},ca={class:"modal-title text-white"},ra=a(()=>e("i",{class:"fas fa-info-circle me-2"},null,-1)),da={class:"modal-body"},ua={class:"row mb-2"},ma={class:"col-6"},ha=a(()=>e("p",{class:"text-xs text-muted mb-0"},"Date",-1)),_a={class:"text-sm font-weight-bold"},pa={class:"col-6"},ga=a(()=>e("p",{class:"text-xs text-muted mb-0"},"Commande",-1)),va={class:"text-sm font-weight-bold"},ba=a(()=>e("hr",{class:"horizontal dark my-2"},null,-1)),fa={class:"row mb-2"},xa={class:"col-12"},ya=a(()=>e("p",{class:"text-xs text-muted mb-0"},"Article",-1)),Sa={class:"text-sm font-weight-bold"},wa={class:"row mb-2"},Aa={class:"col-4"},Ia=a(()=>e("p",{class:"text-xs text-muted mb-0"},"QuantitÃ©",-1)),Ua={class:"text-sm font-weight-bold"},Ca={class:"col-4"},Fa=a(()=>e("p",{class:"text-xs text-muted mb-0"},"Prix Unitaire",-1)),Ta={class:"text-sm font-weight-bold"},ka={class:"col-4"},$a=a(()=>e("p",{class:"text-xs text-muted mb-0"},"Total",-1)),Va={class:"text-sm font-weight-bold text-primary"},Da=a(()=>e("hr",{class:"horizontal dark my-2"},null,-1)),Na={class:"row mb-2"},Ea={class:"col-6"},Ra=a(()=>e("p",{class:"text-xs text-muted mb-0"},"Vendeur",-1)),Pa={class:"text-sm font-weight-bold"},qa={class:"col-6"},Oa=a(()=>e("p",{class:"text-xs text-muted mb-0"},"Site",-1)),za={class:"text-sm font-weight-bold"},ja={class:"modal-footer"},La=a(()=>e("i",{class:"fas fa-times me-1"},null,-1)),Ba={__name:"JournalVentes",setup(L){const pe=Re(),{requireAuth:ge}=qe(),i=Oe(),{showError:E,showLoading:ve,close:re,showSuccess:be}=ze();ge();const S=I(!1),A=I("ventes");let K=null;const B=I(!1),k=I(null),h=I({dateDebut:"",dateFin:"",idSite:null,idUtilisateur:null}),R=I("");let X=null;he(()=>({...h.value}),()=>{X&&clearTimeout(X),X=setTimeout(()=>{console.log("ðŸ” Filtres modifiÃ©s - rafraÃ®chissement automatique"),oe()},500)},{deep:!0});const M=I([{value:null,label:"Tous les sites"}]),de=I([{value:null,label:"Tous les utilisateurs"}]),O=I({caTotal:0,beneficeNet:0,margeBrute:0,caJour:0,ventesJour:0,ventesTotales:0,quantiteTotale:0}),fe=z(()=>{if(!f.value||f.value.length===0)return 0;const r=f.value.reduce((s,t)=>s+parseFloat(t.quantite||0),0);return Math.round(r)}),xe=z(()=>!f.value||f.value.length===0?0:f.value.reduce((s,t)=>s+parseFloat(t.total||0),0));z(()=>f.value?f.value.length:0);const ye=z(()=>{if(!f.value||f.value.length===0)return 0;const r=new Date().toISOString().split("T")[0];return f.value.filter(o=>(o.dateCreation?o.dateCreation.split("T")[0]:"")===r).reduce((o,l)=>o+parseFloat(l.total||0),0)}),Se=z(()=>{if(!f.value||f.value.length===0)return 0;const r=new Date().toISOString().split("T")[0];return f.value.filter(s=>(s.dateCreation?s.dateCreation.split("T")[0]:"")===r).length}),f=I([]),V=I([]),P=I([]),$=I({caTotal:0,margeBrute:0,beneficeNet:0,evolution:[]}),G=I({page:1,pageSize:9999,total:0,totalPages:0}),ue=I({page:1,pageSize:9999,total:0,totalPages:0}),C=r=>{const s=parseFloat(r)||0;return new Intl.NumberFormat("fr-CD",{style:"currency",currency:"CDF"}).format(s)},we=async()=>{try{const r=await w.getSites();let s=Array.isArray(r)?r:[];!i.isSuperAdmin&&i.societeId&&(s=s.filter(t=>t.idSociete===i.societeId||t.idSociete===parseInt(i.societeId)),console.log(`ðŸ”’ Sites filtrÃ©s pour sociÃ©tÃ© #${i.societeId}:`,s.length)),M.value=[{value:null,label:"Tous les sites"},...s.map(t=>({value:t.idSite,label:t.nomSite||t.nom||`Site #${t.idSite}`}))]}catch(r){console.error("âŒ Erreur chargement sites:",r)}},Ae=async()=>{try{const r=await w.getUsers();let s=Array.isArray(r)?r:[];if(!i.isSuperAdmin&&i.societeId){const t=await w.getSites(),o={};(Array.isArray(t)?t:[]).forEach(l=>{o[l.idSite]=l.idSociete}),s=s.filter(l=>{const p=o[l.idSite];return p===i.societeId||p===parseInt(i.societeId)}),console.log(`ðŸ”’ Utilisateurs filtrÃ©s pour sociÃ©tÃ© #${i.societeId}:`,s.length)}de.value=[{value:null,label:"Tous les utilisateurs"},...s.map(t=>({value:t.idUtilisateur,label:`${t.prenom||""} ${t.nom||""}`.trim()}))]}catch(r){console.error("âŒ Erreur chargement utilisateurs:",r)}},Y=async()=>{var r,s,t;try{console.log("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"),console.log("ðŸ“Š CHARGEMENT STATS - Journal des Ventes"),console.log(`ðŸ¢ SociÃ©tÃ© ID: ${i.societeId}`),console.log(`ðŸ“ Site ID: ${i.siteId}`),console.log(`ðŸ‘¤ Utilisateur: ${i.userName}`),console.log("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");const o=await w.getJournalVenteStats({idSociete:i.isSuperAdmin?void 0:i.societeId,idSite:h.value.idSite||i.siteId||void 0,idUtilisateur:h.value.idUtilisateur||void 0});console.log("ðŸ“Š Stats globales (filtrÃ©es sociÃ©tÃ©):",o),Array.isArray(o)&&o.length>0&&(console.log("ðŸ” PropriÃ©tÃ©s stats globales:",Object.keys(o[0])),console.log("ðŸ” PremiÃ¨re stat:",o[0]));const l=new Date().toISOString().split("T")[0],p=await w.getJournalVenteStatsDate(l,{idSite:h.value.idSite||i.siteId||void 0,idSociete:i.isSuperAdmin?void 0:i.societeId,idUtilisateur:h.value.idUtilisateur});console.log("ðŸ“Š Stats du jour:",p);const n=await w.getJournalVenteRapportFinancier({idSite:h.value.idSite||i.siteId||void 0,idSociete:i.isSuperAdmin?void 0:i.societeId,dateDebut:h.value.dateDebut||void 0,dateFin:h.value.dateFin||void 0});console.log("ðŸ“Š Rapport financier:",n);let g=0,c=0;Array.isArray(o)&&o.length>0?(console.log("ðŸ” Stats globales reÃ§ues:",o.length,"sites"),console.log("ðŸ” PremiÃ¨re stat complÃ¨te:",o[0]),console.log("ðŸ” PropriÃ©tÃ©s disponibles:",Object.keys(o[0])),o.forEach(d=>{const _=parseFloat(d.quantiteTotale||d.QuantiteTotale||d.quantiteVendue||d.QuantiteVendue||d.quantite||d.Quantite||0),v=parseInt(d.nombreVentes||d.NombreVentes||d.ventes||d.Ventes||d.totalVentes||d.TotalVentes||0);g+=_,c+=v,console.log(`ðŸ“Š Site: ${d.nomSite||d.NomSite||d.idSite}, QuantitÃ©: ${_}, Ventes: ${v}`)}),console.log(`âœ… Totaux calculÃ©s: ${g} articles, ${c} ventes`)):console.log("âš ï¸ Pas de stats globales disponibles"),g===0&&(p!=null&&p.quantiteVendue)&&(g=parseFloat(p.quantiteVendue),console.log("ðŸ’¡ Utilisation stats du jour pour quantitÃ©:",g)),O.value={caTotal:parseFloat(((r=n==null?void 0:n.resume)==null?void 0:r.caTotal)||0),beneficeNet:parseFloat(((s=n==null?void 0:n.resume)==null?void 0:s.beneficeNet)||0),margeBrute:parseFloat(((t=n==null?void 0:n.resume)==null?void 0:t.margeBrute)||0),caJour:parseFloat((p==null?void 0:p.ca)||0),ventesJour:parseInt((p==null?void 0:p.ventes)||0),ventesTotales:parseInt(c)||0,quantiteTotale:parseInt(g)||0},console.log("ðŸ“Š Stats finales calculÃ©es:",O.value),console.log("ðŸ“¦ QuantitÃ© Totale:",O.value.quantiteTotale,"articles vendus")}catch(o){console.error("âŒ Erreur chargement stats:",o)}},J=async(r=1)=>{var s;S.value=!0;try{const t=i.isSuperAdmin?void 0:i.societeId,o=G.value.pageSize&&G.value.pageSize>0?G.value.pageSize:9999,l={page:r,pageSize:o,idSite:h.value.idSite||i.siteId||void 0,idSociete:t,dateDebut:h.value.dateDebut||void 0,dateFin:h.value.dateFin||void 0,idUtilisateur:h.value.idUtilisateur||void 0};console.log("ðŸ“Š Chargement ventes avec params:",l),console.log(`ðŸ”’ Filtrage sociÃ©tÃ©: ${l.idSociete?"SociÃ©tÃ© #"+l.idSociete:"TOUTES (superadmin)"}`),console.log(`ðŸ“„ PageSize: ${l.pageSize} (toutes les ventes en une fois)`);const p=await w.getJournalVentePaged(l);console.log("ðŸ“Š Response ventes:",p);let n=Array.isArray(p.data)?p.data:Array.isArray(p)?p:[];if(console.log(`ðŸ“Š Ventes reÃ§ues de l'API: ${n.length} ventes (toutes sociÃ©tÃ©s confondues)`),!i.isSuperAdmin&&i.societeId){const _=n.length,v=await w.getSites(),m={};(Array.isArray(v)?v:[]).forEach(b=>{m[b.idSite]=b.idSociete}),n=n.filter(b=>{const F=m[b.idSite],Q=Number(F)===Number(i.societeId);return Q||console.log(`âŒ Vente rejetÃ©e: Site #${b.idSite} (sociÃ©tÃ© #${F}) â‰  sociÃ©tÃ© #${i.societeId}`),Q}),console.log(`ðŸ”’ FILTRAGE SOCIÃ‰TÃ‰: ${_} ventes â†’ ${n.length} ventes (sociÃ©tÃ© #${i.societeId})`)}if(n.length>0){console.log("ðŸ”„ Enrichissement des donnÃ©es avec noms utilisateurs..."),console.log("ðŸ”„ Appel direct Ã  /api/Utilisateurs...");const _=await w.getUsers();if(console.log("ðŸ“‹ Utilisateurs chargÃ©s:",Array.isArray(_)?_.length:0),Array.isArray(_)&&_.length>0){const m=_.map(b=>b.idUtilisateur).filter(Boolean);console.log("ðŸ” TOUS les IDs utilisateurs disponibles:",m),console.log("ðŸ” Les IDs 2 et 3 existent?",{id2:m.includes(2)||m.includes("2"),id3:m.includes(3)||m.includes("3")}),console.log("ðŸ” Premier utilisateur (TOUTES les propriÃ©tÃ©s):",_[0]),console.log("ðŸ” PropriÃ©tÃ©s disponibles:",Object.keys(_[0]))}const v={};(Array.isArray(_)?_:[]).forEach(m=>{const b=m.idUtilisateur||m.IdUtilisateur;if(b){const F=m.prenom||m.Prenom||m.prenomUtilisateur||m.PrenomUtilisateur||m.firstName||"",Q=m.nom||m.Nom||m.nomUtilisateur||m.NomUtilisateur||m.lastName||"",ke=m.username||m.Username||m.userName||m.UserName||"";let H=m.fullName||m.FullName||m.nomComplet||m.NomComplet||""||`${F} ${Q}`.trim()||ke||`User #${b}`;v[String(b)]=H,v[Number(b)]=H,v[b]=H,console.log(`ðŸ‘¤ Utilisateur #${b} â†’ "${H}"`)}}),console.log("ðŸ—ºï¸ Map utilisateurs crÃ©Ã©e:",Object.keys(v).length/2,"utilisateurs"),console.log("ðŸ” Utilisateur ID=2 dans map?",v[2],v[2]),console.log("ðŸ” Utilisateur ID=3 dans map?",v[3],v[3]),n=n.map(m=>{const b=m.idUtilisateur,F=v[b]||v[String(b)]||v[Number(b)];return F||console.log(`âš ï¸ Utilisateur non trouvÃ©: ID=${b} (type: ${typeof b})`),{...m,nomUtilisateur:F||`Utilisateur #${b}`,dateVenteFormatee:m.dateCreation?new Date(m.dateCreation).toLocaleDateString("fr-FR"):"-"}}),console.log("âœ… DonnÃ©es enrichies:",n.length,"ventes")}f.value=n;const g=R.value.trim().toLowerCase();g&&(console.log("ðŸ” Filtrage recherche (ventes) sur:",g),n=n.filter(_=>[_.libelle,_.nomClient,_.nomUtilisateur,_.nomSite,_.idCommande,_.dateVenteFormatee,_.dateCreation].some(m=>m&&String(m).toLowerCase().includes(g))),console.log(`ðŸ” RÃ©sultats recherche ventes: ${n.length} entrÃ©e(s)`));const c=n.length,d=c>0?c:((s=p.pagination)==null?void 0:s.pageSize)||o;G.value={page:1,pageSize:c||1,total:c,totalPages:1},console.log(`ðŸ“Š Pagination mise Ã  jour: ${c} ventes sur 1 page`)}catch(t){console.error("âŒ Erreur chargement ventes:",t),E("Erreur","Impossible de charger les ventes")}finally{S.value=!1}},ee=async()=>{var r;S.value=!0;try{let s=h.value.idSite||i.siteId;!s&&!i.isSuperAdmin&&i.societeId&&(console.log("âš ï¸ Pas de siteId dÃ©fini, chargement du premier site de la sociÃ©tÃ©..."),M.value.length>1&&(s=(r=M.value[1])==null?void 0:r.value,console.log(`âœ… Utilisation du site #${s}`)));const t={idSite:s||void 0,idSociete:i.isSuperAdmin?void 0:i.societeId,dateDebut:h.value.dateDebut||void 0,dateFin:h.value.dateFin||void 0,idUtilisateur:h.value.idUtilisateur||void 0};console.log("ðŸ“Š Chargement articles groupÃ©s avec params:",t),console.log(`ðŸ”’ Filtrage sociÃ©tÃ©: ${t.idSociete?"SociÃ©tÃ© #"+t.idSociete:"TOUTES (superadmin)"}`);const o=i.isSuperAdmin||!t.idSite?await w.getJournalVenteGroupedByArticle(t):await w.getJournalVenteGroupedByArticleGestionnaire(t);console.log("ðŸ“Š Response articles:",o);let l=[];if(o.articles?l=Array.isArray(o.articles)?o.articles:[]:Array.isArray(o)?l=o:l=[],console.log(`ðŸ“Š Articles reÃ§us de l'API: ${l.length}`),!i.isSuperAdmin&&i.societeId&&l.length>0){const n=l.length;if(l[0].idSite||l[0].IdSite){const g=await w.getSites(),c={};(Array.isArray(g)?g:[]).forEach(d=>{c[d.idSite]=d.idSociete}),l=l.filter(d=>{const _=d.idSite||d.IdSite,v=c[_];return v===i.societeId||v===parseInt(i.societeId)}),console.log(`ðŸ”’ FILTRAGE SOCIÃ‰TÃ‰ (articles): ${n} â†’ ${l.length} articles`)}else console.log("âš ï¸ Les articles ne contiennent pas idSite, filtrage impossible")}const p=R.value.trim().toLowerCase();p&&(console.log("ðŸ” Filtrage recherche (articles) sur:",p),l=l.filter(n=>{const g=n.LibelleArticle||n.libelleArticle||n.libelle||n.article||"";return String(g).toLowerCase().includes(p)}),console.log(`ðŸ” RÃ©sultats recherche articles: ${l.length} entrÃ©e(s)`)),V.value=l,V.value.length>0&&(console.log("ðŸ” PROPRIÃ‰TÃ‰S du premier article:",Object.keys(V.value[0])),console.log("ðŸ” Exemple d'article:",V.value[0]))}catch(s){console.error("âŒ Erreur chargement articles:",s),E("Erreur","Impossible de charger les articles")}finally{S.value=!1}},te=async(r=1)=>{S.value=!0;try{const s={page:r,pageSize:ue.value.pageSize,idSite:h.value.idSite||i.siteId||void 0,idSociete:i.isSuperAdmin?void 0:i.societeId,dateDebut:h.value.dateDebut||void 0,dateFin:h.value.dateFin||void 0,idUtilisateur:h.value.idUtilisateur||void 0};console.log("ðŸ“Š Chargement ventes par utilisateur avec params:",s),console.log(`ðŸ”’ Filtrage sociÃ©tÃ©: ${s.idSociete?"SociÃ©tÃ© #"+s.idSociete:"TOUTES (superadmin)"}`);const t=await w.getJournalVentePaged(s);console.log("ðŸ“Š Response utilisateurs:",t);let o=Array.isArray(t.data)?t.data:Array.isArray(t)?t:[];if(console.log(`ðŸ“Š Ventes par utilisateur reÃ§ues: ${o.length}`),!i.isSuperAdmin&&i.societeId){const n=o.length,g=await w.getSites(),c={};(Array.isArray(g)?g:[]).forEach(d=>{c[d.idSite]=d.idSociete}),o=o.filter(d=>{const _=c[d.idSite];return _===i.societeId||_===parseInt(i.societeId)}),console.log(`ðŸ”’ FILTRAGE SOCIÃ‰TÃ‰ (utilisateurs): ${n} â†’ ${o.length} ventes`)}if(o.length>0){console.log("ðŸ”„ Enrichissement des donnÃ©es par utilisateur..."),console.log("ðŸ”„ Appel direct Ã  /api/Utilisateurs...");const n=await w.getUsers();if(console.log("ðŸ“‹ Utilisateurs chargÃ©s:",Array.isArray(n)?n.length:0),Array.isArray(n)&&n.length>0){const c=n.map(d=>d.idUtilisateur).filter(Boolean);console.log("ðŸ” TOUS les IDs utilisateurs disponibles:",c)}const g={};(Array.isArray(n)?n:[]).forEach(c=>{const d=c.idUtilisateur||c.IdUtilisateur;if(d){const _=c.prenom||c.Prenom||c.prenomUtilisateur||c.PrenomUtilisateur||c.firstName||"",v=c.nom||c.Nom||c.nomUtilisateur||c.NomUtilisateur||c.lastName||"",m=c.username||c.Username||c.userName||c.UserName||"";let F=c.fullName||c.FullName||c.nomComplet||c.NomComplet||""||`${_} ${v}`.trim()||m||`User #${d}`;g[String(d)]=F,g[Number(d)]=F,g[d]=F,console.log(`ðŸ‘¤ Utilisateur #${d} â†’ "${F}"`)}}),console.log("ðŸ—ºï¸ Map utilisateurs crÃ©Ã©e:",Object.keys(g).length/3,"utilisateurs"),o=o.map(c=>{const d=c.idUtilisateur,_=g[d]||g[String(d)]||g[Number(d)];return _||console.log(`âš ï¸ Utilisateur non trouvÃ© pour ID=${d} (type: ${typeof d})`),{...c,nomUtilisateur:_||`Utilisateur #${d}`,dateVenteFormatee:c.dateCreation?new Date(c.dateCreation).toLocaleDateString("fr-FR"):"-"}}),console.log("âœ… DonnÃ©es utilisateurs enrichies:",o.length,"ventes")}const l=R.value.trim().toLowerCase();l&&(console.log("ðŸ” Filtrage recherche (utilisateurs) sur:",l),o=o.filter(n=>[n.nomUtilisateur,n.nomClient,n.libelle,n.nomSite,n.idCommande,n.dateVenteFormatee,n.dateCreation].some(c=>c&&String(c).toLowerCase().includes(l))),console.log(`ðŸ” RÃ©sultats recherche utilisateurs: ${o.length} entrÃ©e(s)`)),P.value=o;const p=o.length;ue.value={page:1,pageSize:p,total:p,totalPages:1},console.log(`ðŸ“Š Pagination utilisateurs: ${p} ventes sur 1 page`)}catch(s){console.error("âŒ Erreur chargement utilisateurs:",s),E("Erreur","Impossible de charger les donnÃ©es par utilisateur")}finally{S.value=!1}},se=async()=>{var r,s,t;S.value=!0;try{const o={idSite:h.value.idSite||i.siteId||void 0,idSociete:i.isSuperAdmin?void 0:i.societeId,dateDebut:h.value.dateDebut||void 0,dateFin:h.value.dateFin||void 0,granularite:"jour"};console.log("ðŸ“Š Chargement rapport financier avec params:",o),console.log(`ðŸ”’ Filtrage sociÃ©tÃ©: ${o.idSociete?"SociÃ©tÃ© #"+o.idSociete:"TOUTES (superadmin)"}`);const l=await w.getJournalVenteRapportFinancier(o);console.log("ðŸ“Š Response rapport:",l),$.value={caTotal:parseFloat(((r=l==null?void 0:l.resume)==null?void 0:r.caTotal)||0),margeBrute:parseFloat(((s=l==null?void 0:l.resume)==null?void 0:s.margeBrute)||0),beneficeNet:parseFloat(((t=l==null?void 0:l.resume)==null?void 0:t.beneficeNet)||0),evolution:Array.isArray(l==null?void 0:l.evolution)?l.evolution:[]},console.log("ðŸ“Š DonnÃ©es rapport financier:",$.value),console.log("ðŸ“ˆ DonnÃ©es Ã©volution:",$.value.evolution),console.log("ðŸ“ˆ Nombre de points:",$.value.evolution.length),$.value.evolution.length>0?(await Ee(),console.log("ðŸ“Š CrÃ©ation du graphique..."),Ie()):console.log("âš ï¸ Pas de donnÃ©es d'Ã©volution, graphique non crÃ©Ã©")}catch(o){console.error("âŒ Erreur chargement rapport:",o),E("Erreur","Impossible de charger le rapport financier")}finally{S.value=!1}},Ie=()=>{console.log("ðŸŽ¨ createChart() appelÃ©e");const r=document.getElementById("evolutionChart");if(console.log("ðŸ“Š Canvas trouvÃ©?",!!r),!r){console.error("âŒ Canvas #evolutionChart non trouvÃ© dans le DOM");return}K&&(console.log("ðŸ—‘ï¸ Destruction du graphique existant"),K.destroy());const s=r.getContext("2d"),t=$.value.evolution||[];console.log("ðŸ“ˆ CrÃ©ation du graphique avec",t.length,"points"),K=new je(s,{type:"line",data:{labels:t.map(o=>new Date(o.periode).toLocaleDateString("fr-FR",{day:"2-digit",month:"short"})),datasets:[{label:"CA par jour",data:t.map(o=>parseFloat(o.montant||o.ca||0)),borderColor:"#5e72e4",backgroundColor:"rgba(94, 114, 228, 0.1)",borderWidth:2,fill:!0,tension:.4}]},options:{responsive:!0,maintainAspectRatio:!0,plugins:{legend:{display:!0,position:"top"},tooltip:{callbacks:{label:function(o){return C(o.parsed.y)}}}},scales:{y:{beginAtZero:!0,ticks:{callback:function(o){return new Intl.NumberFormat("fr-CD").format(o)+" FC"}}}}}}),console.log("âœ… Graphique crÃ©Ã© avec succÃ¨s!")},oe=async()=>{switch(console.log("ðŸ” Application des filtres:",h.value,"Recherche:",R.value),await Y(),A.value){case"ventes":await J(1);break;case"articles":await ee();break;case"utilisateurs":await te(1);break;case"rapport":await se();break}},Ue=()=>{h.value={dateDebut:"",dateFin:"",idSite:null,idUtilisateur:null},oe()},me=async()=>{switch(console.log("ðŸ”„ RAFRAÃŽCHISSEMENT MANUEL des donnÃ©es..."),await Y(),A.value){case"ventes":await J(1);break;case"articles":await ee();break;case"utilisateurs":await te(1);break;case"rapport":await se();break}console.log("âœ… RafraÃ®chissement terminÃ©")},ae=async r=>{ve("Export en cours...","GÃ©nÃ©ration du fichier Excel");try{let s=[],t="";switch(r){case"ventes":s=f.value,t=`ventes_${new Date().toISOString().split("T")[0]}.csv`;break;case"articles":s=V.value,t=`articles_${new Date().toISOString().split("T")[0]}.csv`;break;case"utilisateurs":s=P.value,t=`utilisateurs_${new Date().toISOString().split("T")[0]}.csv`;break}if(s.length===0){E("Erreur","Aucune donnÃ©e Ã  exporter");return}const o=Object.keys(s[0]),l=[o.join(";"),...s.map(g=>o.map(c=>g[c]||"").join(";"))].join(`
`),p=new Blob([l],{type:"text/csv;charset=utf-8;"}),n=document.createElement("a");n.href=URL.createObjectURL(p),n.download=t,n.click(),re(),be("ExportÃ© !","Le fichier a Ã©tÃ© tÃ©lÃ©chargÃ©")}catch(s){re(),console.error("âŒ Erreur export:",s),E("Erreur","Impossible d'exporter les donnÃ©es")}},Ce=r=>{console.log("ðŸ‘ï¸ Affichage dÃ©tails vente:",r),k.value=r,B.value=!0},Fe=r=>{console.log("ðŸ”— Redirection vers commande #",r),pe.push(`/commandes/${r}`)};he(A,async r=>{switch(r){case"ventes":await J(1);break;case"articles":await ee();break;case"utilisateurs":await te(1);break;case"rapport":await se();break}});const Te=async()=>{console.log("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"),console.log("ðŸš€ JOURNAL DES VENTES - Initialisation"),console.log("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"),console.log(`ðŸ‘¤ Utilisateur: ${i.userName}`),console.log(`ðŸ¢ SociÃ©tÃ©: ${i.societeName||"N/A"} (ID: ${i.societeId||"N/A"})`),console.log(`ðŸ“ Site: ${i.siteId||"N/A"}`),console.log(`ðŸ”‘ RÃ´le: ${i.isSuperAdmin?"SUPERADMIN (toutes les sociÃ©tÃ©s)":"GESTIONNAIRE (sociÃ©tÃ© filtrÃ©e)"}`),console.log("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"),await Promise.all([we(),Ae()]),await Y(),await J(1),console.log("âœ… Journal des Ventes - Chargement terminÃ©")};return $e(async()=>{await Te()}),Ve(async()=>{console.log("ðŸ”„ Page rÃ©activÃ©e - Auto-refresh des donnÃ©es..."),await me()}),(r,s)=>(y(),x("div",Le,[e("div",Be,[e("div",Me,[e("div",Ge,[Je,T(N,{color:"info",size:"sm",onClick:me,disabled:S.value},{default:D(()=>[e("i",{class:j(["fas fa-sync-alt me-1",{"fa-spin":S.value}])},null,2),U(" "+u(S.value?"Chargement...":"RafraÃ®chir"),1)]),_:1},8,["disabled"])])])]),e("div",Qe,[e("div",He,[e("div",We,[e("div",Ze,[e("div",Ke,[Xe,e("div",Ye,[et,e("h5",tt,u(C(xe.value)),1),e("span",st,u(f.value.length)+" vente(s) ",1)])])])])]),e("div",ot,[e("div",at,[e("div",it,[e("div",lt,[nt,e("div",ct,[rt,e("h5",dt,u(C(O.value.beneficeNet)),1),e("span",ut," Marge: "+u(O.value.margeBrute),1)])])])])]),e("div",mt,[e("div",ht,[e("div",_t,[e("div",pt,[gt,e("div",vt,[bt,e("h5",ft,u(C(ye.value)),1),e("span",xt,u(Se.value)+" vente(s) ",1)])])])])]),e("div",yt,[e("div",St,[e("div",wt,[e("div",At,[It,e("div",Ut,[Ct,e("h5",Ft,u(fe.value),1),Tt])])])])])]),e("div",kt,[e("div",$t,[e("div",Vt,[Dt,T(N,{color:"secondary",size:"sm",onClick:Ue},{default:D(()=>[Nt,U(" RÃ©initialiser ")]),_:1})])]),e("div",Et,[e("div",Rt,[e("div",Pt,[qt,T(ce,{modelValue:R.value,"onUpdate:modelValue":s[0]||(s[0]=t=>R.value=t),type:"text",placeholder:"Client, article, site, commande..."},null,8,["modelValue"])]),e("div",Ot,[zt,T(ce,{modelValue:h.value.dateDebut,"onUpdate:modelValue":s[1]||(s[1]=t=>h.value.dateDebut=t),type:"date"},null,8,["modelValue"])]),e("div",jt,[Lt,T(ce,{modelValue:h.value.dateFin,"onUpdate:modelValue":s[2]||(s[2]=t=>h.value.dateFin=t),type:"date"},null,8,["modelValue"])]),ie(i).isSuperAdmin?(y(),x("div",Bt,[Mt,T(_e,{modelValue:h.value.idSite,"onUpdate:modelValue":s[3]||(s[3]=t=>h.value.idSite=t),options:M.value,placeholder:"Tous les sites"},null,8,["modelValue","options"])])):q("",!0),e("div",Gt,[Jt,T(_e,{modelValue:h.value.idUtilisateur,"onUpdate:modelValue":s[4]||(s[4]=t=>h.value.idUtilisateur=t),options:de.value,placeholder:"Tous les utilisateurs"},null,8,["modelValue","options"])])]),e("div",Qt,[e("div",Ht,[T(N,{color:"primary",onClick:oe,disabled:S.value},{default:D(()=>[Wt,U(" "+u(S.value?"Chargement...":"Appliquer les Filtres"),1)]),_:1},8,["disabled"])])])])]),e("div",Zt,[e("div",Kt,[e("ul",Xt,[e("li",Yt,[e("a",{class:j(["nav-link",{active:A.value==="ventes"}]),onClick:s[5]||(s[5]=t=>A.value="ventes"),role:"tab"},[es,U(" Toutes les Ventes ")],2)]),e("li",ts,[e("a",{class:j(["nav-link",{active:A.value==="articles"}]),onClick:s[6]||(s[6]=t=>A.value="articles"),role:"tab"},[ss,U(" Par Article ")],2)]),e("li",os,[e("a",{class:j(["nav-link",{active:A.value==="utilisateurs"}]),onClick:s[7]||(s[7]=t=>A.value="utilisateurs"),role:"tab"},[as,U(" Par Utilisateur ")],2)]),e("li",is,[e("a",{class:j(["nav-link",{active:A.value==="rapport"}]),onClick:s[8]||(s[8]=t=>A.value="rapport"),role:"tab"},[ls,U(" Rapport Financier ")],2)])])]),e("div",ns,[W(e("div",null,[e("div",cs,[rs,T(N,{color:"success",size:"sm",onClick:s[9]||(s[9]=t=>ae("ventes"))},{default:D(()=>[ds,U(" Exporter ")]),_:1})]),e("div",us,[e("table",ms,[hs,e("tbody",null,[S.value?(y(),x("tr",_s,gs)):f.value.length===0?(y(),x("tr",vs,fs)):(y(!0),x(le,{key:2},ne(f.value,(t,o)=>(y(),x("tr",{key:o},[e("td",null,[e("p",xs,u(t.dateVenteFormatee),1)]),e("td",null,[e("span",ys,u(t.idCommande),1)]),e("td",null,[e("p",Ss,u(t.libelle),1)]),e("td",ws,[e("span",As,u(parseFloat(t.quantite).toFixed(0)),1)]),e("td",Is,[e("span",Us,u(C(t.prixUnitaire)),1)]),e("td",Cs,[e("span",Fs,u(C(t.total)),1)]),e("td",null,[e("p",Ts,u(t.nomUtilisateur),1)]),e("td",null,[e("span",ks,u(t.nomSite),1)]),e("td",$s,[e("div",Vs,[e("button",{onClick:l=>Ce(t),class:"btn btn-link text-info p-0 mb-0 me-2",title:"Voir dÃ©tails"},Es,8,Ds),ie(i).isGestionnaire||ie(i).isSuperAdmin?(y(),x("button",{key:0,onClick:l=>Fe(t.idCommande),class:"btn btn-link text-primary p-0 mb-0",title:"GÃ©rer dans Commandes"},qs,8,Rs)):q("",!0)])])]))),128))])])]),f.value.length>0?(y(),x("div",Os,[e("p",zs,[e("strong",null,u(f.value.length),1),U(" vente(s) affichÃ©e(s) pour votre sociÃ©tÃ© ")])])):q("",!0)],512),[[Z,A.value==="ventes"]]),W(e("div",null,[e("div",js,[Ls,T(N,{color:"success",size:"sm",onClick:s[10]||(s[10]=t=>ae("articles"))},{default:D(()=>[Bs,U(" Exporter ")]),_:1})]),e("div",Ms,[e("table",Gs,[Js,e("tbody",null,[V.value.length===0&&!S.value?(y(),x("tr",Qs,Ws)):S.value?(y(),x("tr",Zs,Xs)):q("",!0),(y(!0),x(le,null,ne(V.value,(t,o)=>(y(),x("tr",{key:o},[e("td",null,[e("p",Ys,u(t.LibelleArticle||t.libelleArticle||t.libelle),1)]),e("td",eo,[e("span",to,u(parseFloat(t.QuantiteTotale||t.quantiteTotale||t.quantite||0).toFixed(0)),1)]),e("td",so,[e("span",oo,u(C(t.MontantTotal||t.montantTotal||t.montant||0)),1)]),e("td",ao,[e("span",io,u(t.NombreVentes||t.nombreVentes||t.ventes||0),1)])]))),128))])])])],512),[[Z,A.value==="articles"]]),W(e("div",null,[e("div",lo,[no,T(N,{color:"success",size:"sm",onClick:s[11]||(s[11]=t=>ae("utilisateurs"))},{default:D(()=>[co,U(" Exporter ")]),_:1})]),e("div",ro,[e("table",uo,[mo,e("tbody",null,[S.value?(y(),x("tr",ho,po)):P.value.length===0?(y(),x("tr",go,bo)):(y(!0),x(le,{key:2},ne(P.value,(t,o)=>(y(),x("tr",{key:o},[e("td",null,[e("p",fo,u(t.dateVenteFormatee),1)]),e("td",null,[e("p",xo,u(t.nomUtilisateur),1)]),e("td",null,[e("p",yo,u(t.libelle),1)]),e("td",So,[e("span",wo,u(parseFloat(t.quantite).toFixed(0)),1)]),e("td",Ao,[e("span",Io,u(C(t.total)),1)]),e("td",null,[e("span",Uo,u(t.nomSite),1)])]))),128))])])]),P.value.length>0?(y(),x("div",Co,[e("p",Fo,[e("strong",null,u(P.value.length),1),U(" vente(s) affichÃ©e(s) pour votre sociÃ©tÃ© ")])])):q("",!0)],512),[[Z,A.value==="utilisateurs"]]),W(e("div",null,[e("div",To,[e("div",ko,[$o,e("div",Vo,[e("div",Do,[e("div",No,[e("div",Eo,[Ro,e("h4",Po,u(C($.value.caTotal)),1)])])]),e("div",qo,[e("div",Oo,[e("div",zo,[jo,e("h4",Lo,u(C($.value.margeBrute)),1)])])]),e("div",Bo,[e("div",Mo,[e("div",Go,[Jo,e("h4",Qo,u(C($.value.beneficeNet)),1)])])])])]),e("div",Ho,[Wo,e("div",Zo,[e("div",Ko,[!$.value.evolution||$.value.evolution.length===0?(y(),x("div",Xo,sa)):(y(),x("canvas",oa))])])])])],512),[[Z,A.value==="rapport"]])])]),B.value&&k.value?(y(),x("div",aa,[e("div",ia,[e("div",la,[e("div",na,[e("h5",ca,[ra,U(" DÃ©tails de la Vente #"+u(k.value.idCommande),1)]),e("button",{type:"button",class:"btn-close btn-close-white",onClick:s[12]||(s[12]=t=>B.value=!1)})]),e("div",da,[e("div",ua,[e("div",ma,[ha,e("p",_a,u(k.value.dateVenteFormatee),1)]),e("div",pa,[ga,e("p",va,"#"+u(k.value.idCommande),1)])]),ba,e("div",fa,[e("div",xa,[ya,e("p",Sa,u(k.value.libelle),1)])]),e("div",wa,[e("div",Aa,[Ia,e("p",Ua,u(k.value.quantite),1)]),e("div",Ca,[Fa,e("p",Ta,u(C(k.value.prixUnitaire)),1)]),e("div",ka,[$a,e("p",Va,u(C(k.value.total)),1)])]),Da,e("div",Na,[e("div",Ea,[Ra,e("p",Pa,u(k.value.nomUtilisateur),1)]),e("div",qa,[Oa,e("p",za,u(k.value.nomSite),1)])])]),e("div",ja,[T(N,{color:"secondary",onClick:s[13]||(s[13]=t=>B.value=!1)},{default:D(()=>[La,U(" Fermer ")]),_:1})])])])])):q("",!0)]))}},Za=Pe(Ba,[["__scopeId","data-v-1039baee"]]);export{Za as default};
