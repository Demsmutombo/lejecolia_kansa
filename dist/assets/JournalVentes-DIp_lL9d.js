import{a as A,w as ue,c as O,q as Te,P as ke,l as h,o as y,h as e,m as P,p as F,C as I,g as V,t as c,B as oe,n as z,v as Q,x as H,F as le,D as ae,Q as $e,u as Ve}from"./vendor-5ChSB122.js";import{_ as De,c as Ne,u as Ee,f as D,a as ie,e as Re,d as _}from"./index-C7KYosbF.js";import{A as me}from"./ArgonSelect-BIJzuYL2.js";import{C as Pe}from"./charts-D32nV7-X.js";import"./bootstrap-DXdCWnwj.js";const qe={class:"container-fluid px-4 py-3"},Oe={class:"row mb-4"},ze={class:"col-12"},je={class:"d-flex justify-content-between align-items-center"},Le={class:"row mb-4"},Be={class:"col-lg-3 col-md-6 mb-3"},Me={class:"card h-100"},Je={class:"card-body p-3"},Ge={class:"d-flex"},Qe={class:"flex-grow-1"},He={class:"font-weight-bolder mb-0"},We={class:"text-xs text-secondary"},Ze={class:"col-lg-3 col-md-6 mb-3"},Ke={class:"card h-100"},Xe={class:"card-body p-3"},Ye={class:"d-flex"},et={class:"flex-grow-1"},tt={class:"font-weight-bolder mb-0"},st={class:"text-xs text-secondary"},ot={class:"col-lg-3 col-md-6 mb-3"},lt={class:"card h-100"},at={class:"card-body p-3"},it={class:"d-flex"},nt={class:"flex-grow-1"},rt={class:"font-weight-bolder mb-0"},dt={class:"text-xs text-secondary"},ct={class:"col-lg-3 col-md-6 mb-3"},ut={class:"card h-100"},mt={class:"card-body p-3"},pt={class:"d-flex"},gt={class:"flex-grow-1"},vt={class:"font-weight-bolder mb-0"},bt={class:"card mb-4"},ft={class:"card-header pb-0"},xt={class:"d-flex justify-content-between align-items-center"},ht={class:"card-body"},yt={class:"row"},St={class:"col-md-3 mb-3"},_t={class:"col-md-3 mb-3"},wt={class:"col-md-3 mb-3"},At={key:0,class:"col-md-3 mb-3"},It={class:"col-md-3 mb-3"},Ut={class:"row"},Ct={class:"col-12"},Ft={class:"card"},Tt={class:"card-header pb-0"},kt={class:"nav nav-tabs",role:"tablist"},$t={class:"nav-item"},Vt={class:"nav-item"},Dt={class:"nav-item"},Nt={class:"nav-item"},Et={class:"card-body"},Rt={class:"d-flex justify-content-between align-items-center mb-3"},Pt={class:"table-responsive"},qt={class:"table align-items-center mb-0"},Ot={key:0},zt={key:1},jt={class:"text-xs mb-0"},Lt={class:"badge badge-sm bg-gradient-secondary"},Bt={class:"text-sm font-weight-bold mb-0"},Mt={class:"align-middle text-center"},Jt={class:"text-sm"},Gt={class:"align-middle text-end"},Qt={class:"text-xs text-secondary"},Ht={class:"align-middle text-end"},Wt={class:"text-sm font-weight-bold"},Zt={class:"text-xs font-weight-bold mb-0 text-info"},Kt={class:"badge badge-sm bg-gradient-info"},Xt={class:"align-middle text-center"},Yt={class:"d-flex justify-content-center gap-1"},es=["onClick"],ts=["onClick"],ss={key:0,class:"mt-3"},os={class:"text-sm text-secondary text-end mb-0"},ls={class:"d-flex justify-content-between align-items-center mb-3"},as={class:"table-responsive"},is={class:"table align-items-center mb-0"},ns={key:0},rs={key:1},ds={class:"text-sm font-weight-bold mb-0"},cs={class:"align-middle text-center"},us={class:"text-sm"},ms={class:"align-middle text-end"},ps={class:"text-sm font-weight-bold"},gs={class:"align-middle text-center"},vs={class:"badge badge-sm bg-gradient-info"},bs={class:"d-flex justify-content-between align-items-center mb-3"},fs={class:"table-responsive"},xs={class:"table align-items-center mb-0"},hs={key:0},ys={key:1},Ss={class:"text-xs mb-0"},_s={class:"text-xs font-weight-bold mb-0 text-primary"},ws={class:"text-sm font-weight-bold mb-0"},As={class:"align-middle text-center"},Is={class:"text-sm"},Us={class:"align-middle text-end"},Cs={class:"text-sm font-weight-bold"},Fs={class:"badge badge-sm bg-gradient-info"},Ts={key:0,class:"mt-3"},ks={class:"text-sm text-secondary text-end mb-0"},$s={class:"row"},Vs={class:"col-12 mb-4"},Ds={class:"row"},Ns={class:"col-md-4 mb-3"},Es={class:"card bg-gradient-primary"},Rs={class:"card-body p-3 text-white"},Ps={class:"font-weight-bolder mb-0 text-white"},qs={class:"col-md-4 mb-3"},Os={class:"card bg-gradient-success"},zs={class:"card-body p-3 text-white"},js={class:"font-weight-bolder mb-0 text-white"},Ls={class:"col-md-4 mb-3"},Bs={class:"card bg-gradient-info"},Ms={class:"card-body p-3 text-white"},Js={class:"font-weight-bolder mb-0 text-white"},Gs={class:"col-12"},Qs={class:"card"},Hs={class:"card-body"},Ws={key:0,class:"text-center text-secondary py-4"},Zs={key:1,id:"evolutionChart",height:"100"},Ks={key:0,class:"modal fade show d-block",tabindex:"-1",style:{"background-color":"rgba(0,0,0,0.5)"}},Xs={class:"modal-dialog modal-dialog-centered"},Ys={class:"modal-content"},eo={class:"modal-header bg-gradient-info"},to={class:"modal-title text-white"},so={class:"modal-body"},oo={class:"row mb-2"},lo={class:"col-6"},ao={class:"text-sm font-weight-bold"},io={class:"col-6"},no={class:"text-sm font-weight-bold"},ro={class:"row mb-2"},co={class:"col-12"},uo={class:"text-sm font-weight-bold"},mo={class:"row mb-2"},po={class:"col-4"},go={class:"text-sm font-weight-bold"},vo={class:"col-4"},bo={class:"text-sm font-weight-bold"},fo={class:"col-4"},xo={class:"text-sm font-weight-bold text-primary"},ho={class:"row mb-2"},yo={class:"col-6"},So={class:"text-sm font-weight-bold"},_o={class:"col-6"},wo={class:"text-sm font-weight-bold"},Ao={class:"modal-footer"},Io={__name:"JournalVentes",setup(Uo){const pe=Ve(),{requireAuth:ge}=Ne(),l=Ee(),{showError:N,showLoading:ve,close:ne,showSuccess:be}=Re();ge();const S=A(!1),w=A("ventes");let W=null;const j=A(!1),T=A(null),m=A({dateDebut:"",dateFin:"",idSite:null,idUtilisateur:null}),E=A("");let Z=null;ue(()=>({...m.value}),()=>{Z&&clearTimeout(Z),Z=setTimeout(()=>{console.log("ðŸ” Filtres modifiÃ©s - rafraÃ®chissement automatique"),te()},500)},{deep:!0});const L=A([{value:null,label:"Tous les sites"}]),re=A([{value:null,label:"Tous les utilisateurs"}]),q=A({caTotal:0,beneficeNet:0,margeBrute:0,caJour:0,ventesJour:0,ventesTotales:0,quantiteTotale:0}),fe=O(()=>{if(!x.value||x.value.length===0)return 0;const r=x.value.reduce((t,s)=>t+parseFloat(s.quantite||0),0);return Math.round(r)}),xe=O(()=>!x.value||x.value.length===0?0:x.value.reduce((t,s)=>t+parseFloat(s.total||0),0));O(()=>x.value?x.value.length:0);const he=O(()=>{if(!x.value||x.value.length===0)return 0;const r=new Date().toISOString().split("T")[0];return x.value.filter(o=>(o.dateCreation?o.dateCreation.split("T")[0]:"")===r).reduce((o,a)=>o+parseFloat(a.total||0),0)}),ye=O(()=>{if(!x.value||x.value.length===0)return 0;const r=new Date().toISOString().split("T")[0];return x.value.filter(t=>(t.dateCreation?t.dateCreation.split("T")[0]:"")===r).length}),x=A([]),$=A([]),R=A([]),k=A({caTotal:0,margeBrute:0,beneficeNet:0,evolution:[]}),B=A({page:1,pageSize:9999,total:0,totalPages:0}),de=A({page:1,pageSize:9999,total:0,totalPages:0}),U=r=>{const t=parseFloat(r)||0;return new Intl.NumberFormat("fr-CD",{style:"currency",currency:"CDF"}).format(t)},Se=async()=>{try{const r=await _.getSites();let t=Array.isArray(r)?r:[];!l.isSuperAdmin&&l.societeId&&(t=t.filter(s=>s.idSociete===l.societeId||s.idSociete===parseInt(l.societeId)),console.log(`ðŸ”’ Sites filtrÃ©s pour sociÃ©tÃ© #${l.societeId}:`,t.length)),L.value=[{value:null,label:"Tous les sites"},...t.map(s=>({value:s.idSite,label:s.nomSite||s.nom||`Site #${s.idSite}`}))]}catch(r){console.error("âŒ Erreur chargement sites:",r)}},_e=async()=>{try{const r=await _.getUsers();let t=Array.isArray(r)?r:[];if(!l.isSuperAdmin&&l.societeId){const s=await _.getSites(),o={};(Array.isArray(s)?s:[]).forEach(a=>{o[a.idSite]=a.idSociete}),t=t.filter(a=>{const g=o[a.idSite];return g===l.societeId||g===parseInt(l.societeId)}),console.log(`ðŸ”’ Utilisateurs filtrÃ©s pour sociÃ©tÃ© #${l.societeId}:`,t.length)}re.value=[{value:null,label:"Tous les utilisateurs"},...t.map(s=>({value:s.idUtilisateur,label:`${s.prenom||""} ${s.nom||""}`.trim()}))]}catch(r){console.error("âŒ Erreur chargement utilisateurs:",r)}},K=async()=>{var r,t,s;try{console.log("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"),console.log("ðŸ“Š CHARGEMENT STATS - Journal des Ventes"),console.log(`ðŸ¢ SociÃ©tÃ© ID: ${l.societeId}`),console.log(`ðŸ“ Site ID: ${l.siteId}`),console.log(`ðŸ‘¤ Utilisateur: ${l.userName}`),console.log("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");const o=await _.getJournalVenteStats({idSociete:l.isSuperAdmin?void 0:l.societeId,idSite:m.value.idSite||l.siteId||void 0,idUtilisateur:m.value.idUtilisateur||void 0});console.log("ðŸ“Š Stats globales (filtrÃ©es sociÃ©tÃ©):",o),Array.isArray(o)&&o.length>0&&(console.log("ðŸ” PropriÃ©tÃ©s stats globales:",Object.keys(o[0])),console.log("ðŸ” PremiÃ¨re stat:",o[0]));const a=new Date().toISOString().split("T")[0],g=await _.getJournalVenteStatsDate(a,{idSite:m.value.idSite||l.siteId||void 0,idSociete:l.isSuperAdmin?void 0:l.societeId,idUtilisateur:m.value.idUtilisateur});console.log("ðŸ“Š Stats du jour:",g);const i=await _.getJournalVenteRapportFinancier({idSite:m.value.idSite||l.siteId||void 0,idSociete:l.isSuperAdmin?void 0:l.societeId,dateDebut:m.value.dateDebut||void 0,dateFin:m.value.dateFin||void 0});console.log("ðŸ“Š Rapport financier:",i);let v=0,n=0;Array.isArray(o)&&o.length>0?(console.log("ðŸ” Stats globales reÃ§ues:",o.length,"sites"),console.log("ðŸ” PremiÃ¨re stat complÃ¨te:",o[0]),console.log("ðŸ” PropriÃ©tÃ©s disponibles:",Object.keys(o[0])),o.forEach(d=>{const p=parseFloat(d.quantiteTotale||d.QuantiteTotale||d.quantiteVendue||d.QuantiteVendue||d.quantite||d.Quantite||0),b=parseInt(d.nombreVentes||d.NombreVentes||d.ventes||d.Ventes||d.totalVentes||d.TotalVentes||0);v+=p,n+=b,console.log(`ðŸ“Š Site: ${d.nomSite||d.NomSite||d.idSite}, QuantitÃ©: ${p}, Ventes: ${b}`)}),console.log(`âœ… Totaux calculÃ©s: ${v} articles, ${n} ventes`)):console.log("âš ï¸ Pas de stats globales disponibles"),v===0&&(g!=null&&g.quantiteVendue)&&(v=parseFloat(g.quantiteVendue),console.log("ðŸ’¡ Utilisation stats du jour pour quantitÃ©:",v)),q.value={caTotal:parseFloat(((r=i==null?void 0:i.resume)==null?void 0:r.caTotal)||0),beneficeNet:parseFloat(((t=i==null?void 0:i.resume)==null?void 0:t.beneficeNet)||0),margeBrute:parseFloat(((s=i==null?void 0:i.resume)==null?void 0:s.margeBrute)||0),caJour:parseFloat((g==null?void 0:g.ca)||0),ventesJour:parseInt((g==null?void 0:g.ventes)||0),ventesTotales:parseInt(n)||0,quantiteTotale:parseInt(v)||0},console.log("ðŸ“Š Stats finales calculÃ©es:",q.value),console.log("ðŸ“¦ QuantitÃ© Totale:",q.value.quantiteTotale,"articles vendus")}catch(o){console.error("âŒ Erreur chargement stats:",o)}},M=async(r=1)=>{var t;S.value=!0;try{const s=l.isSuperAdmin?void 0:l.societeId,o=B.value.pageSize&&B.value.pageSize>0?B.value.pageSize:9999,a={page:r,pageSize:o,idSite:m.value.idSite||l.siteId||void 0,idSociete:s,dateDebut:m.value.dateDebut||void 0,dateFin:m.value.dateFin||void 0,idUtilisateur:m.value.idUtilisateur||void 0};console.log("ðŸ“Š Chargement ventes avec params:",a),console.log(`ðŸ”’ Filtrage sociÃ©tÃ©: ${a.idSociete?"SociÃ©tÃ© #"+a.idSociete:"TOUTES (superadmin)"}`),console.log(`ðŸ“„ PageSize: ${a.pageSize} (toutes les ventes en une fois)`);const g=await _.getJournalVentePaged(a);console.log("ðŸ“Š Response ventes:",g);let i=Array.isArray(g.data)?g.data:Array.isArray(g)?g:[];if(console.log(`ðŸ“Š Ventes reÃ§ues de l'API: ${i.length} ventes (toutes sociÃ©tÃ©s confondues)`),!l.isSuperAdmin&&l.societeId){const p=i.length,b=await _.getSites(),u={};(Array.isArray(b)?b:[]).forEach(f=>{u[f.idSite]=f.idSociete}),i=i.filter(f=>{const C=u[f.idSite],J=Number(C)===Number(l.societeId);return J||console.log(`âŒ Vente rejetÃ©e: Site #${f.idSite} (sociÃ©tÃ© #${C}) â‰  sociÃ©tÃ© #${l.societeId}`),J}),console.log(`ðŸ”’ FILTRAGE SOCIÃ‰TÃ‰: ${p} ventes â†’ ${i.length} ventes (sociÃ©tÃ© #${l.societeId})`)}if(i.length>0){console.log("ðŸ”„ Enrichissement des donnÃ©es avec noms utilisateurs..."),console.log("ðŸ”„ Appel direct Ã  /api/Utilisateurs...");const p=await _.getUsers();if(console.log("ðŸ“‹ Utilisateurs chargÃ©s:",Array.isArray(p)?p.length:0),Array.isArray(p)&&p.length>0){const u=p.map(f=>f.idUtilisateur).filter(Boolean);console.log("ðŸ” TOUS les IDs utilisateurs disponibles:",u),console.log("ðŸ” Les IDs 2 et 3 existent?",{id2:u.includes(2)||u.includes("2"),id3:u.includes(3)||u.includes("3")}),console.log("ðŸ” Premier utilisateur (TOUTES les propriÃ©tÃ©s):",p[0]),console.log("ðŸ” PropriÃ©tÃ©s disponibles:",Object.keys(p[0]))}const b={};(Array.isArray(p)?p:[]).forEach(u=>{const f=u.idUtilisateur||u.IdUtilisateur;if(f){const C=u.prenom||u.Prenom||u.prenomUtilisateur||u.PrenomUtilisateur||u.firstName||"",J=u.nom||u.Nom||u.nomUtilisateur||u.NomUtilisateur||u.lastName||"",Fe=u.username||u.Username||u.userName||u.UserName||"";let G=u.fullName||u.FullName||u.nomComplet||u.NomComplet||""||`${C} ${J}`.trim()||Fe||`User #${f}`;b[String(f)]=G,b[Number(f)]=G,b[f]=G,console.log(`ðŸ‘¤ Utilisateur #${f} â†’ "${G}"`)}}),console.log("ðŸ—ºï¸ Map utilisateurs crÃ©Ã©e:",Object.keys(b).length/2,"utilisateurs"),console.log("ðŸ” Utilisateur ID=2 dans map?",b[2],b[2]),console.log("ðŸ” Utilisateur ID=3 dans map?",b[3],b[3]),i=i.map(u=>{const f=u.idUtilisateur,C=b[f]||b[String(f)]||b[Number(f)];return C||console.log(`âš ï¸ Utilisateur non trouvÃ©: ID=${f} (type: ${typeof f})`),{...u,nomUtilisateur:C||`Utilisateur #${f}`,dateVenteFormatee:u.dateCreation?new Date(u.dateCreation).toLocaleDateString("fr-FR"):"-"}}),console.log("âœ… DonnÃ©es enrichies:",i.length,"ventes")}x.value=i;const v=E.value.trim().toLowerCase();v&&(console.log("ðŸ” Filtrage recherche (ventes) sur:",v),i=i.filter(p=>[p.libelle,p.nomClient,p.nomUtilisateur,p.nomSite,p.idCommande,p.dateVenteFormatee,p.dateCreation].some(u=>u&&String(u).toLowerCase().includes(v))),console.log(`ðŸ” RÃ©sultats recherche ventes: ${i.length} entrÃ©e(s)`));const n=i.length,d=n>0?n:((t=g.pagination)==null?void 0:t.pageSize)||o;B.value={page:1,pageSize:n||1,total:n,totalPages:1},console.log(`ðŸ“Š Pagination mise Ã  jour: ${n} ventes sur 1 page`)}catch(s){console.error("âŒ Erreur chargement ventes:",s),N("Erreur","Impossible de charger les ventes")}finally{S.value=!1}},X=async()=>{var r;S.value=!0;try{let t=m.value.idSite||l.siteId;!t&&!l.isSuperAdmin&&l.societeId&&(console.log("âš ï¸ Pas de siteId dÃ©fini, chargement du premier site de la sociÃ©tÃ©..."),L.value.length>1&&(t=(r=L.value[1])==null?void 0:r.value,console.log(`âœ… Utilisation du site #${t}`)));const s={idSite:t||void 0,idSociete:l.isSuperAdmin?void 0:l.societeId,dateDebut:m.value.dateDebut||void 0,dateFin:m.value.dateFin||void 0,idUtilisateur:m.value.idUtilisateur||void 0};console.log("ðŸ“Š Chargement articles groupÃ©s avec params:",s),console.log(`ðŸ”’ Filtrage sociÃ©tÃ©: ${s.idSociete?"SociÃ©tÃ© #"+s.idSociete:"TOUTES (superadmin)"}`);const o=l.isSuperAdmin||!s.idSite?await _.getJournalVenteGroupedByArticle(s):await _.getJournalVenteGroupedByArticleGestionnaire(s);console.log("ðŸ“Š Response articles:",o);let a=[];if(o.articles?a=Array.isArray(o.articles)?o.articles:[]:Array.isArray(o)?a=o:a=[],console.log(`ðŸ“Š Articles reÃ§us de l'API: ${a.length}`),!l.isSuperAdmin&&l.societeId&&a.length>0){const i=a.length;if(a[0].idSite||a[0].IdSite){const v=await _.getSites(),n={};(Array.isArray(v)?v:[]).forEach(d=>{n[d.idSite]=d.idSociete}),a=a.filter(d=>{const p=d.idSite||d.IdSite,b=n[p];return b===l.societeId||b===parseInt(l.societeId)}),console.log(`ðŸ”’ FILTRAGE SOCIÃ‰TÃ‰ (articles): ${i} â†’ ${a.length} articles`)}else console.log("âš ï¸ Les articles ne contiennent pas idSite, filtrage impossible")}const g=E.value.trim().toLowerCase();g&&(console.log("ðŸ” Filtrage recherche (articles) sur:",g),a=a.filter(i=>{const v=i.LibelleArticle||i.libelleArticle||i.libelle||i.article||"";return String(v).toLowerCase().includes(g)}),console.log(`ðŸ” RÃ©sultats recherche articles: ${a.length} entrÃ©e(s)`)),$.value=a,$.value.length>0&&(console.log("ðŸ” PROPRIÃ‰TÃ‰S du premier article:",Object.keys($.value[0])),console.log("ðŸ” Exemple d'article:",$.value[0]))}catch(t){console.error("âŒ Erreur chargement articles:",t),N("Erreur","Impossible de charger les articles")}finally{S.value=!1}},Y=async(r=1)=>{S.value=!0;try{const t={page:r,pageSize:de.value.pageSize,idSite:m.value.idSite||l.siteId||void 0,idSociete:l.isSuperAdmin?void 0:l.societeId,dateDebut:m.value.dateDebut||void 0,dateFin:m.value.dateFin||void 0,idUtilisateur:m.value.idUtilisateur||void 0};console.log("ðŸ“Š Chargement ventes par utilisateur avec params:",t),console.log(`ðŸ”’ Filtrage sociÃ©tÃ©: ${t.idSociete?"SociÃ©tÃ© #"+t.idSociete:"TOUTES (superadmin)"}`);const s=await _.getJournalVentePaged(t);console.log("ðŸ“Š Response utilisateurs:",s);let o=Array.isArray(s.data)?s.data:Array.isArray(s)?s:[];if(console.log(`ðŸ“Š Ventes par utilisateur reÃ§ues: ${o.length}`),!l.isSuperAdmin&&l.societeId){const i=o.length,v=await _.getSites(),n={};(Array.isArray(v)?v:[]).forEach(d=>{n[d.idSite]=d.idSociete}),o=o.filter(d=>{const p=n[d.idSite];return p===l.societeId||p===parseInt(l.societeId)}),console.log(`ðŸ”’ FILTRAGE SOCIÃ‰TÃ‰ (utilisateurs): ${i} â†’ ${o.length} ventes`)}if(o.length>0){console.log("ðŸ”„ Enrichissement des donnÃ©es par utilisateur..."),console.log("ðŸ”„ Appel direct Ã  /api/Utilisateurs...");const i=await _.getUsers();if(console.log("ðŸ“‹ Utilisateurs chargÃ©s:",Array.isArray(i)?i.length:0),Array.isArray(i)&&i.length>0){const n=i.map(d=>d.idUtilisateur).filter(Boolean);console.log("ðŸ” TOUS les IDs utilisateurs disponibles:",n)}const v={};(Array.isArray(i)?i:[]).forEach(n=>{const d=n.idUtilisateur||n.IdUtilisateur;if(d){const p=n.prenom||n.Prenom||n.prenomUtilisateur||n.PrenomUtilisateur||n.firstName||"",b=n.nom||n.Nom||n.nomUtilisateur||n.NomUtilisateur||n.lastName||"",u=n.username||n.Username||n.userName||n.UserName||"";let C=n.fullName||n.FullName||n.nomComplet||n.NomComplet||""||`${p} ${b}`.trim()||u||`User #${d}`;v[String(d)]=C,v[Number(d)]=C,v[d]=C,console.log(`ðŸ‘¤ Utilisateur #${d} â†’ "${C}"`)}}),console.log("ðŸ—ºï¸ Map utilisateurs crÃ©Ã©e:",Object.keys(v).length/3,"utilisateurs"),o=o.map(n=>{const d=n.idUtilisateur,p=v[d]||v[String(d)]||v[Number(d)];return p||console.log(`âš ï¸ Utilisateur non trouvÃ© pour ID=${d} (type: ${typeof d})`),{...n,nomUtilisateur:p||`Utilisateur #${d}`,dateVenteFormatee:n.dateCreation?new Date(n.dateCreation).toLocaleDateString("fr-FR"):"-"}}),console.log("âœ… DonnÃ©es utilisateurs enrichies:",o.length,"ventes")}const a=E.value.trim().toLowerCase();a&&(console.log("ðŸ” Filtrage recherche (utilisateurs) sur:",a),o=o.filter(i=>[i.nomUtilisateur,i.nomClient,i.libelle,i.nomSite,i.idCommande,i.dateVenteFormatee,i.dateCreation].some(n=>n&&String(n).toLowerCase().includes(a))),console.log(`ðŸ” RÃ©sultats recherche utilisateurs: ${o.length} entrÃ©e(s)`)),R.value=o;const g=o.length;de.value={page:1,pageSize:g,total:g,totalPages:1},console.log(`ðŸ“Š Pagination utilisateurs: ${g} ventes sur 1 page`)}catch(t){console.error("âŒ Erreur chargement utilisateurs:",t),N("Erreur","Impossible de charger les donnÃ©es par utilisateur")}finally{S.value=!1}},ee=async()=>{var r,t,s;S.value=!0;try{const o={idSite:m.value.idSite||l.siteId||void 0,idSociete:l.isSuperAdmin?void 0:l.societeId,dateDebut:m.value.dateDebut||void 0,dateFin:m.value.dateFin||void 0,granularite:"jour"};console.log("ðŸ“Š Chargement rapport financier avec params:",o),console.log(`ðŸ”’ Filtrage sociÃ©tÃ©: ${o.idSociete?"SociÃ©tÃ© #"+o.idSociete:"TOUTES (superadmin)"}`);const a=await _.getJournalVenteRapportFinancier(o);console.log("ðŸ“Š Response rapport:",a),k.value={caTotal:parseFloat(((r=a==null?void 0:a.resume)==null?void 0:r.caTotal)||0),margeBrute:parseFloat(((t=a==null?void 0:a.resume)==null?void 0:t.margeBrute)||0),beneficeNet:parseFloat(((s=a==null?void 0:a.resume)==null?void 0:s.beneficeNet)||0),evolution:Array.isArray(a==null?void 0:a.evolution)?a.evolution:[]},console.log("ðŸ“Š DonnÃ©es rapport financier:",k.value),console.log("ðŸ“ˆ DonnÃ©es Ã©volution:",k.value.evolution),console.log("ðŸ“ˆ Nombre de points:",k.value.evolution.length),k.value.evolution.length>0?(await $e(),console.log("ðŸ“Š CrÃ©ation du graphique..."),we()):console.log("âš ï¸ Pas de donnÃ©es d'Ã©volution, graphique non crÃ©Ã©")}catch(o){console.error("âŒ Erreur chargement rapport:",o),N("Erreur","Impossible de charger le rapport financier")}finally{S.value=!1}},we=()=>{console.log("ðŸŽ¨ createChart() appelÃ©e");const r=document.getElementById("evolutionChart");if(console.log("ðŸ“Š Canvas trouvÃ©?",!!r),!r){console.error("âŒ Canvas #evolutionChart non trouvÃ© dans le DOM");return}W&&(console.log("ðŸ—‘ï¸ Destruction du graphique existant"),W.destroy());const t=r.getContext("2d"),s=k.value.evolution||[];console.log("ðŸ“ˆ CrÃ©ation du graphique avec",s.length,"points"),W=new Pe(t,{type:"line",data:{labels:s.map(o=>new Date(o.periode).toLocaleDateString("fr-FR",{day:"2-digit",month:"short"})),datasets:[{label:"CA par jour",data:s.map(o=>parseFloat(o.montant||o.ca||0)),borderColor:"#5e72e4",backgroundColor:"rgba(94, 114, 228, 0.1)",borderWidth:2,fill:!0,tension:.4}]},options:{responsive:!0,maintainAspectRatio:!0,plugins:{legend:{display:!0,position:"top"},tooltip:{callbacks:{label:function(o){return U(o.parsed.y)}}}},scales:{y:{beginAtZero:!0,ticks:{callback:function(o){return new Intl.NumberFormat("fr-CD").format(o)+" FC"}}}}}}),console.log("âœ… Graphique crÃ©Ã© avec succÃ¨s!")},te=async()=>{switch(console.log("ðŸ” Application des filtres:",m.value,"Recherche:",E.value),await K(),w.value){case"ventes":await M(1);break;case"articles":await X();break;case"utilisateurs":await Y(1);break;case"rapport":await ee();break}},Ae=()=>{m.value={dateDebut:"",dateFin:"",idSite:null,idUtilisateur:null},te()},ce=async()=>{switch(console.log("ðŸ”„ RAFRAÃŽCHISSEMENT MANUEL des donnÃ©es..."),await K(),w.value){case"ventes":await M(1);break;case"articles":await X();break;case"utilisateurs":await Y(1);break;case"rapport":await ee();break}console.log("âœ… RafraÃ®chissement terminÃ©")},se=async r=>{ve("Export en cours...","GÃ©nÃ©ration du fichier Excel");try{let t=[],s="";switch(r){case"ventes":t=x.value,s=`ventes_${new Date().toISOString().split("T")[0]}.csv`;break;case"articles":t=$.value,s=`articles_${new Date().toISOString().split("T")[0]}.csv`;break;case"utilisateurs":t=R.value,s=`utilisateurs_${new Date().toISOString().split("T")[0]}.csv`;break}if(t.length===0){N("Erreur","Aucune donnÃ©e Ã  exporter");return}const o=Object.keys(t[0]),a=[o.join(";"),...t.map(v=>o.map(n=>v[n]||"").join(";"))].join(`
`),g=new Blob([a],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a");i.href=URL.createObjectURL(g),i.download=s,i.click(),ne(),be("ExportÃ© !","Le fichier a Ã©tÃ© tÃ©lÃ©chargÃ©")}catch(t){ne(),console.error("âŒ Erreur export:",t),N("Erreur","Impossible d'exporter les donnÃ©es")}},Ie=r=>{console.log("ðŸ‘ï¸ Affichage dÃ©tails vente:",r),T.value=r,j.value=!0},Ue=r=>{console.log("ðŸ”— Redirection vers commande #",r),pe.push(`/commandes/${r}`)};ue(w,async r=>{switch(r){case"ventes":await M(1);break;case"articles":await X();break;case"utilisateurs":await Y(1);break;case"rapport":await ee();break}});const Ce=async()=>{console.log("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"),console.log("ðŸš€ JOURNAL DES VENTES - Initialisation"),console.log("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"),console.log(`ðŸ‘¤ Utilisateur: ${l.userName}`),console.log(`ðŸ¢ SociÃ©tÃ©: ${l.societeName||"N/A"} (ID: ${l.societeId||"N/A"})`),console.log(`ðŸ“ Site: ${l.siteId||"N/A"}`),console.log(`ðŸ”‘ RÃ´le: ${l.isSuperAdmin?"SUPERADMIN (toutes les sociÃ©tÃ©s)":"GESTIONNAIRE (sociÃ©tÃ© filtrÃ©e)"}`),console.log("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"),await Promise.all([Se(),_e()]),await K(),await M(1),console.log("âœ… Journal des Ventes - Chargement terminÃ©")};return Te(async()=>{await Ce()}),ke(async()=>{console.log("ðŸ”„ Page rÃ©activÃ©e - Auto-refresh des donnÃ©es..."),await ce()}),(r,t)=>(y(),h("div",qe,[e("div",Oe,[e("div",ze,[e("div",je,[t[14]||(t[14]=e("div",null,[e("h4",{class:"mb-0"},[e("i",{class:"fas fa-book me-2 text-primary"}),I(" Journal des Ventes ")]),e("p",{class:"text-sm text-white mb-0"}," Analyse complÃ¨te des ventes avec statistiques et rapports financiers ")],-1)),F(D,{color:"info",size:"sm",onClick:ce,disabled:S.value},{default:V(()=>[e("i",{class:z(["fas fa-sync-alt me-1",{"fa-spin":S.value}])},null,2),I(" "+c(S.value?"Chargement...":"RafraÃ®chir"),1)]),_:1},8,["disabled"])])])]),e("div",Le,[e("div",Be,[e("div",Me,[e("div",Je,[e("div",Ge,[t[16]||(t[16]=e("div",{class:"icon icon-shape bg-gradient-primary shadow text-center border-radius-md me-3"},[e("i",{class:"fas fa-coins text-white text-lg opacity-10"})],-1)),e("div",Qe,[t[15]||(t[15]=e("p",{class:"text-sm mb-0 text-capitalize font-weight-bold"},"CA Total",-1)),e("h5",He,c(U(xe.value)),1),e("span",We,c(x.value.length)+" vente(s) ",1)])])])])]),e("div",Ze,[e("div",Ke,[e("div",Xe,[e("div",Ye,[t[18]||(t[18]=e("div",{class:"icon icon-shape bg-gradient-success shadow text-center border-radius-md me-3"},[e("i",{class:"fas fa-chart-line text-white text-lg opacity-10"})],-1)),e("div",et,[t[17]||(t[17]=e("p",{class:"text-sm mb-0 text-capitalize font-weight-bold"},"BÃ©nÃ©fice Net",-1)),e("h5",tt,c(U(q.value.beneficeNet)),1),e("span",st," Marge: "+c(q.value.margeBrute),1)])])])])]),e("div",ot,[e("div",lt,[e("div",at,[e("div",it,[t[20]||(t[20]=e("div",{class:"icon icon-shape bg-gradient-info shadow text-center border-radius-md me-3"},[e("i",{class:"fas fa-calendar-day text-white text-lg opacity-10"})],-1)),e("div",nt,[t[19]||(t[19]=e("p",{class:"text-sm mb-0 text-capitalize font-weight-bold"},"CA Aujourd'hui",-1)),e("h5",rt,c(U(he.value)),1),e("span",dt,c(ye.value)+" vente(s) ",1)])])])])]),e("div",ct,[e("div",ut,[e("div",mt,[e("div",pt,[t[23]||(t[23]=e("div",{class:"icon icon-shape bg-gradient-warning shadow text-center border-radius-md me-3"},[e("i",{class:"fas fa-boxes text-white text-lg opacity-10"})],-1)),e("div",gt,[t[21]||(t[21]=e("p",{class:"text-sm mb-0 text-capitalize font-weight-bold"},"QuantitÃ© Vendue",-1)),e("h5",vt,c(fe.value),1),t[22]||(t[22]=e("span",{class:"text-xs text-secondary"}," Articles vendus ",-1))])])])])])]),e("div",bt,[e("div",ft,[e("div",xt,[t[25]||(t[25]=e("h6",{class:"mb-0"},"ðŸ” Filtres",-1)),F(D,{color:"secondary",size:"sm",onClick:Ae},{default:V(()=>[...t[24]||(t[24]=[e("i",{class:"fas fa-redo me-1"},null,-1),I(" RÃ©initialiser ",-1)])]),_:1})])]),e("div",ht,[e("div",yt,[e("div",St,[t[26]||(t[26]=e("label",{class:"form-label"},"Recherche",-1)),F(ie,{modelValue:E.value,"onUpdate:modelValue":t[0]||(t[0]=s=>E.value=s),type:"text",placeholder:"Client, article, site, commande..."},null,8,["modelValue"])]),e("div",_t,[t[27]||(t[27]=e("label",{class:"form-label"},"Date DÃ©but",-1)),F(ie,{modelValue:m.value.dateDebut,"onUpdate:modelValue":t[1]||(t[1]=s=>m.value.dateDebut=s),type:"date"},null,8,["modelValue"])]),e("div",wt,[t[28]||(t[28]=e("label",{class:"form-label"},"Date Fin",-1)),F(ie,{modelValue:m.value.dateFin,"onUpdate:modelValue":t[2]||(t[2]=s=>m.value.dateFin=s),type:"date"},null,8,["modelValue"])]),oe(l).isSuperAdmin?(y(),h("div",At,[t[29]||(t[29]=e("label",{class:"form-label"},"Site",-1)),F(me,{modelValue:m.value.idSite,"onUpdate:modelValue":t[3]||(t[3]=s=>m.value.idSite=s),options:L.value,placeholder:"Tous les sites"},null,8,["modelValue","options"])])):P("",!0),e("div",It,[t[30]||(t[30]=e("label",{class:"form-label"},"Utilisateur",-1)),F(me,{modelValue:m.value.idUtilisateur,"onUpdate:modelValue":t[4]||(t[4]=s=>m.value.idUtilisateur=s),options:re.value,placeholder:"Tous les utilisateurs"},null,8,["modelValue","options"])])]),e("div",Ut,[e("div",Ct,[F(D,{color:"primary",onClick:te,disabled:S.value},{default:V(()=>[t[31]||(t[31]=e("i",{class:"fas fa-search me-1"},null,-1)),I(" "+c(S.value?"Chargement...":"Appliquer les Filtres"),1)]),_:1},8,["disabled"])])])])]),e("div",Ft,[e("div",Tt,[e("ul",kt,[e("li",$t,[e("a",{class:z(["nav-link",{active:w.value==="ventes"}]),onClick:t[5]||(t[5]=s=>w.value="ventes"),role:"tab"},[...t[32]||(t[32]=[e("i",{class:"fas fa-list me-1"},null,-1),I(" Toutes les Ventes ",-1)])],2)]),e("li",Vt,[e("a",{class:z(["nav-link",{active:w.value==="articles"}]),onClick:t[6]||(t[6]=s=>w.value="articles"),role:"tab"},[...t[33]||(t[33]=[e("i",{class:"fas fa-chart-bar me-1"},null,-1),I(" Par Article ",-1)])],2)]),e("li",Dt,[e("a",{class:z(["nav-link",{active:w.value==="utilisateurs"}]),onClick:t[7]||(t[7]=s=>w.value="utilisateurs"),role:"tab"},[...t[34]||(t[34]=[e("i",{class:"fas fa-user-circle me-1"},null,-1),I(" Par Utilisateur ",-1)])],2)]),e("li",Nt,[e("a",{class:z(["nav-link",{active:w.value==="rapport"}]),onClick:t[8]||(t[8]=s=>w.value="rapport"),role:"tab"},[...t[35]||(t[35]=[e("i",{class:"fas fa-file-invoice-dollar me-1"},null,-1),I(" Rapport Financier ",-1)])],2)])])]),e("div",Et,[Q(e("div",null,[e("div",Rt,[t[37]||(t[37]=e("h6",{class:"mb-0"},"Liste des Ventes",-1)),F(D,{color:"success",size:"sm",onClick:t[9]||(t[9]=s=>se("ventes"))},{default:V(()=>[...t[36]||(t[36]=[e("i",{class:"fas fa-file-excel me-1"},null,-1),I(" Exporter ",-1)])]),_:1})]),e("div",Pt,[e("table",qt,[t[42]||(t[42]=e("thead",null,[e("tr",null,[e("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder"},"Date"),e("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder"},"Cmd"),e("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder"},"Article"),e("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder text-center"},"QtÃ©"),e("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder text-end"},"P.U."),e("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder text-end"},"Total"),e("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder"},"Vendeur"),e("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder"},"Site"),e("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder text-center"},"Actions")])],-1)),e("tbody",null,[S.value?(y(),h("tr",Ot,[...t[38]||(t[38]=[e("td",{colspan:"9",class:"text-center py-4"},[e("div",{class:"spinner-border text-primary",role:"status"},[e("span",{class:"visually-hidden"},"Chargement...")])],-1)])])):x.value.length===0?(y(),h("tr",zt,[...t[39]||(t[39]=[e("td",{colspan:"9",class:"text-center text-secondary py-4"},[e("i",{class:"fas fa-inbox fa-2x mb-2"}),e("p",{class:"mb-0"},"Aucune vente disponible")],-1)])])):(y(!0),h(le,{key:2},ae(x.value,(s,o)=>(y(),h("tr",{key:o},[e("td",null,[e("p",jt,c(s.dateVenteFormatee),1)]),e("td",null,[e("span",Lt,c(s.idCommande),1)]),e("td",null,[e("p",Bt,c(s.libelle),1)]),e("td",Mt,[e("span",Jt,c(parseFloat(s.quantite).toFixed(0)),1)]),e("td",Gt,[e("span",Qt,c(U(s.prixUnitaire)),1)]),e("td",Ht,[e("span",Wt,c(U(s.total)),1)]),e("td",null,[e("p",Zt,c(s.nomUtilisateur),1)]),e("td",null,[e("span",Kt,c(s.nomSite),1)]),e("td",Xt,[e("div",Yt,[e("button",{onClick:a=>Ie(s),class:"btn btn-link text-info p-0 mb-0 me-2",title:"Voir dÃ©tails"},[...t[40]||(t[40]=[e("i",{class:"fas fa-eye text-sm"},null,-1)])],8,es),oe(l).isGestionnaire||oe(l).isSuperAdmin?(y(),h("button",{key:0,onClick:a=>Ue(s.idCommande),class:"btn btn-link text-primary p-0 mb-0",title:"GÃ©rer dans Commandes"},[...t[41]||(t[41]=[e("i",{class:"fas fa-external-link-alt text-sm"},null,-1)])],8,ts)):P("",!0)])])]))),128))])])]),x.value.length>0?(y(),h("div",ss,[e("p",os,[e("strong",null,c(x.value.length),1),t[43]||(t[43]=I(" vente(s) affichÃ©e(s) pour votre sociÃ©tÃ© ",-1))])])):P("",!0)],512),[[H,w.value==="ventes"]]),Q(e("div",null,[e("div",ls,[t[45]||(t[45]=e("h6",{class:"mb-0"},"Ventes GroupÃ©es par Article",-1)),F(D,{color:"success",size:"sm",onClick:t[10]||(t[10]=s=>se("articles"))},{default:V(()=>[...t[44]||(t[44]=[e("i",{class:"fas fa-file-excel me-1"},null,-1),I(" Exporter ",-1)])]),_:1})]),e("div",as,[e("table",is,[t[48]||(t[48]=e("thead",null,[e("tr",null,[e("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder"},"Article"),e("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder text-center"},"QuantitÃ©"),e("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder text-end"},"Montant Total"),e("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder text-center"},"Nb Ventes")])],-1)),e("tbody",null,[$.value.length===0&&!S.value?(y(),h("tr",ns,[...t[46]||(t[46]=[e("td",{colspan:"4",class:"text-center text-secondary py-4"},[e("i",{class:"fas fa-inbox fa-2x mb-2"}),e("p",{class:"mb-0"},"Aucune donnÃ©e disponible")],-1)])])):S.value?(y(),h("tr",rs,[...t[47]||(t[47]=[e("td",{colspan:"4",class:"text-center py-4"},[e("div",{class:"spinner-border text-primary",role:"status"},[e("span",{class:"visually-hidden"},"Chargement...")])],-1)])])):P("",!0),(y(!0),h(le,null,ae($.value,(s,o)=>(y(),h("tr",{key:o},[e("td",null,[e("p",ds,c(s.LibelleArticle||s.libelleArticle||s.libelle),1)]),e("td",cs,[e("span",us,c(parseFloat(s.QuantiteTotale||s.quantiteTotale||s.quantite||0).toFixed(0)),1)]),e("td",ms,[e("span",ps,c(U(s.MontantTotal||s.montantTotal||s.montant||0)),1)]),e("td",gs,[e("span",vs,c(s.NombreVentes||s.nombreVentes||s.ventes||0),1)])]))),128))])])])],512),[[H,w.value==="articles"]]),Q(e("div",null,[e("div",bs,[t[50]||(t[50]=e("h6",{class:"mb-0"},"Ventes par Utilisateur",-1)),F(D,{color:"success",size:"sm",onClick:t[11]||(t[11]=s=>se("utilisateurs"))},{default:V(()=>[...t[49]||(t[49]=[e("i",{class:"fas fa-file-excel me-1"},null,-1),I(" Exporter ",-1)])]),_:1})]),e("div",fs,[e("table",xs,[t[53]||(t[53]=e("thead",null,[e("tr",null,[e("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder"},"Date"),e("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder"},"Vendeur"),e("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder"},"Article"),e("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder text-center"},"QtÃ©"),e("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder text-end"},"Total"),e("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder"},"Site")])],-1)),e("tbody",null,[S.value?(y(),h("tr",hs,[...t[51]||(t[51]=[e("td",{colspan:"6",class:"text-center py-4"},[e("div",{class:"spinner-border text-primary",role:"status"},[e("span",{class:"visually-hidden"},"Chargement...")])],-1)])])):R.value.length===0?(y(),h("tr",ys,[...t[52]||(t[52]=[e("td",{colspan:"6",class:"text-center text-secondary py-4"},[e("i",{class:"fas fa-inbox fa-2x mb-2"}),e("p",{class:"mb-0"},"Aucune donnÃ©e disponible")],-1)])])):(y(!0),h(le,{key:2},ae(R.value,(s,o)=>(y(),h("tr",{key:o},[e("td",null,[e("p",Ss,c(s.dateVenteFormatee),1)]),e("td",null,[e("p",_s,c(s.nomUtilisateur),1)]),e("td",null,[e("p",ws,c(s.libelle),1)]),e("td",As,[e("span",Is,c(parseFloat(s.quantite).toFixed(0)),1)]),e("td",Us,[e("span",Cs,c(U(s.total)),1)]),e("td",null,[e("span",Fs,c(s.nomSite),1)])]))),128))])])]),R.value.length>0?(y(),h("div",Ts,[e("p",ks,[e("strong",null,c(R.value.length),1),t[54]||(t[54]=I(" vente(s) affichÃ©e(s) pour votre sociÃ©tÃ© ",-1))])])):P("",!0)],512),[[H,w.value==="utilisateurs"]]),Q(e("div",null,[e("div",$s,[e("div",Vs,[t[58]||(t[58]=e("h6",{class:"mb-3"},"ðŸ“Š RÃ©sumÃ© Financier",-1)),e("div",Ds,[e("div",Ns,[e("div",Es,[e("div",Rs,[t[55]||(t[55]=e("p",{class:"text-sm mb-1 opacity-8"},"CA Total",-1)),e("h4",Ps,c(U(k.value.caTotal)),1)])])]),e("div",qs,[e("div",Os,[e("div",zs,[t[56]||(t[56]=e("p",{class:"text-sm mb-1 opacity-8"},"Marge Brute",-1)),e("h4",js,c(U(k.value.margeBrute)),1)])])]),e("div",Ls,[e("div",Bs,[e("div",Ms,[t[57]||(t[57]=e("p",{class:"text-sm mb-1 opacity-8"},"BÃ©nÃ©fice Net",-1)),e("h4",Js,c(U(k.value.beneficeNet)),1)])])])])]),e("div",Gs,[t[60]||(t[60]=e("h6",{class:"mb-3"},"ðŸ“ˆ Ã‰volution des Ventes",-1)),e("div",Qs,[e("div",Hs,[!k.value.evolution||k.value.evolution.length===0?(y(),h("div",Ws,[...t[59]||(t[59]=[e("i",{class:"fas fa-chart-line fa-2x mb-2 opacity-6"},null,-1),e("p",{class:"mb-0"},"Aucune donnÃ©e d'Ã©volution disponible",-1),e("p",{class:"text-xs mb-0"},"Essayez de sÃ©lectionner une pÃ©riode avec des ventes",-1)])])):(y(),h("canvas",Zs))])])])])],512),[[H,w.value==="rapport"]])])]),j.value&&T.value?(y(),h("div",Ks,[e("div",Xs,[e("div",Ys,[e("div",eo,[e("h5",to,[t[61]||(t[61]=e("i",{class:"fas fa-info-circle me-2"},null,-1)),I(" DÃ©tails de la Vente #"+c(T.value.idCommande),1)]),e("button",{type:"button",class:"btn-close btn-close-white",onClick:t[12]||(t[12]=s=>j.value=!1)})]),e("div",so,[e("div",oo,[e("div",lo,[t[62]||(t[62]=e("p",{class:"text-xs text-muted mb-0"},"Date",-1)),e("p",ao,c(T.value.dateVenteFormatee),1)]),e("div",io,[t[63]||(t[63]=e("p",{class:"text-xs text-muted mb-0"},"Commande",-1)),e("p",no,"#"+c(T.value.idCommande),1)])]),t[70]||(t[70]=e("hr",{class:"horizontal dark my-2"},null,-1)),e("div",ro,[e("div",co,[t[64]||(t[64]=e("p",{class:"text-xs text-muted mb-0"},"Article",-1)),e("p",uo,c(T.value.libelle),1)])]),e("div",mo,[e("div",po,[t[65]||(t[65]=e("p",{class:"text-xs text-muted mb-0"},"QuantitÃ©",-1)),e("p",go,c(T.value.quantite),1)]),e("div",vo,[t[66]||(t[66]=e("p",{class:"text-xs text-muted mb-0"},"Prix Unitaire",-1)),e("p",bo,c(U(T.value.prixUnitaire)),1)]),e("div",fo,[t[67]||(t[67]=e("p",{class:"text-xs text-muted mb-0"},"Total",-1)),e("p",xo,c(U(T.value.total)),1)])]),t[71]||(t[71]=e("hr",{class:"horizontal dark my-2"},null,-1)),e("div",ho,[e("div",yo,[t[68]||(t[68]=e("p",{class:"text-xs text-muted mb-0"},"Vendeur",-1)),e("p",So,c(T.value.nomUtilisateur),1)]),e("div",_o,[t[69]||(t[69]=e("p",{class:"text-xs text-muted mb-0"},"Site",-1)),e("p",wo,c(T.value.nomSite),1)])])]),e("div",Ao,[F(D,{color:"secondary",onClick:t[13]||(t[13]=s=>j.value=!1)},{default:V(()=>[...t[72]||(t[72]=[e("i",{class:"fas fa-times me-1"},null,-1),I(" Fermer ",-1)])]),_:1})])])])])):P("",!0)]))}},Do=De(Io,[["__scopeId","data-v-1039baee"]]);export{Do as default};
